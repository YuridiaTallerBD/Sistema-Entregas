<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Inicio - Sistema de Entregas</title>

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <style>
    :root {
      --yuri-purple: #8b5cf6;
      --yuri-purple-dark: #6d28d9;
      --yuri-purple-light: #f3e8ff;
    }

    body {
      background: linear-gradient(135deg, #fdf2ff, #e9d5ff);
      min-height: 100vh;
    }

    .navbar-yuri {
      background: #ffffff;
      border-radius: 999px;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.08);
      margin-bottom: 30px;
    }

    .navbar-yuri .navbar-brand {
      color: var(--yuri-purple-dark);
    }

    .navbar-yuri .nav-link {
      color: #6b7280;
    }

    .navbar-yuri .nav-link:hover,
    .navbar-yuri .nav-link.active {
      color: var(--yuri-purple-dark);
      font-weight: 600;
    }

    .btn-primary {
      background-color: var(--yuri-purple);
      border-color: var(--yuri-purple);
    }

    .btn-primary:hover {
      background-color: var(--yuri-purple-dark);
      border-color: var(--yuri-purple-dark);
    }

    .card-yuri {
      border-radius: 18px;
      border: none;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
      overflow: hidden;
    }

    .card-yuri-header {
      height: 6px;
      background: linear-gradient(90deg, var(--yuri-purple), #ec4899);
    }
  </style>
</head>
<body>

<div class="container py-4">

  <h1 class="text-center fw-bold mb-2" style="color: #4c1d95;">
    Sistema de Gestión de Entregas
  </h1>
  <p class="text-center text-secondary mb-4">
    Administra zonas, repartidores y pedidos de forma centralizada.
  </p>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light navbar-yuri px-3">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="/">BIENVENIDOS</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
<ul class="navbar-nav ms-auto">
  <li class="nav-item"><a class="nav-link" href="/zonas.html">Zonas</a></li>
  <li class="nav-item"><a class="nav-link" href="/repartidores.html">Repartidores</a></li>
  <li class="nav-item"><a class="nav-link" href="/pedidos.html">Pedidos</a></li>

  <!-- Botón de cerrar sesión -->
  <li class="nav-item ms-3">
    <a href="/auth/logout" 
       class="btn btn-outline-danger btn-sm"
       style="border-radius: 20px;">
      Cerrar sesión
    </a>
  </li>
</ul>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link active" href="/">Inicio</a></li>
          <li class="nav-item"><a class="nav-link" href="/zonas.html">Zonas</a></li>
          <li class="nav-item"><a class="nav-link" href="/repartidores.html">Repartidores</a></li>
          <li class="nav-item"><a class="nav-link" href="/pedidos.html">Pedidos</a></li>
        </ul>
      </div>
    </div>
  </nav>
  

  <!-- Tarjetas -->
  <div class="row g-4 justify-content-center">

    <div class="col-md-4">
      <div class="card card-yuri h-100">
        <div class="card-yuri-header"></div>
        <div class="card-body text-center">
          <h3 class="card-title fw-bold" style="color:#4c1d95;">Zonas</h3>
          <p class="text-secondary">
            Registra y organiza las zonas de entrega como NORTE, SUR o CENTRO.
          </p>
          <a href="/zonas.html" class="btn btn-primary">Gestionar Zonas</a>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card card-yuri h-100">
        <div class="card-yuri-header"></div>
        <div class="card-body text-center">
          <h3 class="card-title fw-bold" style="color:#4c1d95;">Repartidores</h3>
          <p class="text-secondary">
            Administra repartidores, datos de contacto y su zona asignada.
          </p>
          <a href="/repartidores.html" class="btn btn-primary">Gestionar Repartidores</a>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card card-yuri h-100">
        <div class="card-yuri-header"></div>
        <div class="card-body text-center">
          <h3 class="card-title fw-bold" style="color:#4c1d95;">Pedidos</h3>
          <p class="text-secondary">
            Registra pedidos, asigna repartidores y actualiza su estado.
          </p>
          <a href="/pedidos.html" class="btn btn-primary">Gestionar Pedidos</a>
        </div>
      </div>
    </div>

  </div>
</div>
<script>
  // Verificar si el usuario está autenticado
  async function checkAuth() {
    try {
      const res = await fetch("/auth/user");
      if (res.status === 401) {
        // No hay sesión → mandar a login
        window.location.href = "/login.html";
      } else {
        const data = await res.json();
        console.log("Usuario logueado:", data.user?.nombre);
        // Aquí podrías poner el nombre en la navbar si quieres
      }
    } catch (err) {
      console.error("Error verificando autenticación:", err);
      window.location.href = "/login.html";
    }
  }

  // Ejecutar verificación al cargar la página
  checkAuth();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
